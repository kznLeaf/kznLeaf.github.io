

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/tree.png">
  <link rel="icon" href="/img/tree.png">
  
    <link rel="canonical" href="https://kznleaf.site/2025/07/14/剑指offer-动态规划/"/>
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="banyee">
  <meta name="keywords" content="">
  
    <meta name="description" content="题目 P254 使用最小花费爬楼梯 单序列问题 P259 打家劫舍 P264 打家劫舍II P268 将字符串翻转到单调递增 P271 *最长的斐波那契子序列的长度 P274 *分割回文串II 双序列问题 P277 最长公共子序列（几乎一样的题：两个字符串的删除操作） 最长递增子序列 贪心+二分 P282 交错字符串 P287 不同的子序列 P311 零钱兑换 矩阵路">
<meta property="og:type" content="article">
<meta property="og:title" content="剑指offer-动态规划">
<meta property="og:url" content="https://kznleaf.site/2025/07/14/%E5%89%91%E6%8C%87offer-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/index.html">
<meta property="og:site_name" content="絆叶の片隅">
<meta property="og:description" content="题目 P254 使用最小花费爬楼梯 单序列问题 P259 打家劫舍 P264 打家劫舍II P268 将字符串翻转到单调递增 P271 *最长的斐波那契子序列的长度 P274 *分割回文串II 双序列问题 P277 最长公共子序列（几乎一样的题：两个字符串的删除操作） 最长递增子序列 贪心+二分 P282 交错字符串 P287 不同的子序列 P311 零钱兑换 矩阵路">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-14T13:46:30.000Z">
<meta property="article:modified_time" content="2025-07-14T13:48:19.464Z">
<meta property="article:author" content="banyee">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>剑指offer-动态规划 - 絆叶の片隅</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/custom.css">
<link rel="stylesheet" href="/css/macBorder.css">
<link rel="stylesheet" href="/css/sign.css">
<link rel="stylesheet" href="/css/backgroundize.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"kznleaf.site","root":"/","version":"1.9.8","typing":{"enable":false,"typeSpeed":70,"cursorChar":"","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":false,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":true},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body><!-- hexo injector body_begin start --><div id="web_bg"></div><!-- hexo injector body_begin end -->

  <div id="Loadanimation" style="z-index:999999;">
    <div id="Loadanimation-center">
       <div id="Loadanimation-center-absolute">
           <div class="xccx_object" id="xccx_four"></div>
           <div class="xccx_object" id="xccx_three"></div>
           <div class="xccx_object" id="xccx_two"></div>
           <div class="xccx_object" id="xccx_one"></div>
       </div>
    </div>
    </div>

  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>banyee&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/background.webp') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.1)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">剑指offer-动态规划</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-07-14 21:46" pubdate>
          2025年7月14日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          25 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">剑指offer-动态规划</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="题目">题目</h2>
<p>P254 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/min-cost-climbing-stairs/description/">使用最小花费爬楼梯</a></p>
<p><strong>单序列问题</strong></p>
<p>P259 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/house-robber/description/">打家劫舍</a></p>
<p>P264 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/house-robber-ii/description/">打家劫舍II</a></p>
<p>P268 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/flip-string-to-monotone-increasing/description/">将字符串翻转到单调递增</a></p>
<p>P271 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/length-of-longest-fibonacci-subsequence/description/">*最长的斐波那契子序列的长度</a></p>
<p>P274 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/palindrome-partitioning-ii/">*分割回文串II</a></p>
<p><strong>双序列问题</strong></p>
<p>P277 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/longest-common-subsequence/description/">最长公共子序列</a>（几乎一样的题：<a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/delete-operation-for-two-strings/description/">两个字符串的删除操作</a>）</p>
<p><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/longest-increasing-subsequence/description/">最长递增子序列</a>
贪心+二分</p>
<p>P282 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/interleaving-string/description/">交错字符串</a></p>
<p>P287 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/distinct-subsequences/description/">不同的子序列</a></p>
<p>P311 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/coin-change/">零钱兑换</a></p>
<p><strong>矩阵路径问题</strong></p>
<p>P292 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/unique-paths/?envType=study-plan-v2&amp;envId=top-100-liked">不同路径</a></p>
<p>P296 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/minimum-path-sum/">最小路径和</a></p>
<p>P299 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/triangle/">三角形最小路径和</a>（从下往上，用一个数组记录前一行的数字）</p>
<p><strong>背包问题</strong></p>
<p>给定一组物品，每种物品都有其重量和价格，在限定的总重量内如何选择才能使物品的总价格最高。</p>
<p>如果每种物品只有一个，可以选择将之放入或不放入背包，那么可以将这类问题称为
0-1 背包问题。0-1 背包问题是最基本的背包问题，其他背包问题通常可以转化为
0-1 背包问题。</p>
<p>如果第<code>i</code>种物品最多有<code>Mi</code>个，也就是每种物品的数量都是有限的，那么这类背包问题称为有界背包问题（也可以称为多重背包问题）。如果每种物品的数量都是无限的，那么这类背包问题称为无界背包问题（也可以称为完全背包问题）。</p>
<p>P305 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/partition-equal-subset-sum/?envType=study-plan-v2&amp;envId=top-100-liked">分割等和子集</a>
倒序遍历</p>
<p>P309 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/target-sum/description/">目标和</a>
倒序遍历，记录组合数</p>
<ul>
<li>求组合数：外层为数组元素，内层为目标值。</li>
<li>求排列数：外层为目标值，内层为数组元素。先确定需要凑出来多大的值，然后</li>
</ul>
<p>P313 <a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/combination-sum-iv/description/">组合总和
Ⅳ</a> 求排列数</p>
<h2 id="题解">题解</h2>
<h3 id="粉刷房子">粉刷房子</h3>
<p>会员专享题</p>
<p>一排<code>n</code>幢房子要粉刷成红色、绿色和蓝色，不同房子被粉刷成不同颜色的成本不同。用一个<code>n×3</code>的数组表示<code>n</code>幢房子分别用3种颜色粉刷的成本。要求<strong>任意相邻的两幢房子的颜色都不一样</strong>，请计算粉刷这<code>n</code>
幢房子的最少成本。例如，粉刷3幢房子的成本分别为<code>[[17, 2, 16], [15, 14, 5], [13, 3, 1]]</code>，如果分别将这
3 幢房子粉刷成绿色、蓝色和绿色，那么粉刷的成本是10，是最少的成本。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minCost</span><span class="hljs-params">(<span class="hljs-type">int</span>[][] costs)</span> &#123;<br>    <span class="hljs-keyword">if</span> (costs.length == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; costs.length; i++) &#123;<br>        costs[i][<span class="hljs-number">0</span>] += Math.min(costs[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>], costs[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>]); <span class="hljs-comment">// 红色</span><br>        costs[i][<span class="hljs-number">1</span>] += Math.min(costs[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>], costs[i - <span class="hljs-number">1</span>][<span class="hljs-number">2</span>]); <span class="hljs-comment">// 绿色</span><br>        costs[i][<span class="hljs-number">2</span>] += Math.min(costs[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>], costs[i - <span class="hljs-number">1</span>][<span class="hljs-number">1</span>]); <span class="hljs-comment">// 蓝色</span><br>    &#125;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> costs.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> Math.min(costs[n][<span class="hljs-number">0</span>], Math.min(costs[n][<span class="hljs-number">1</span>], costs[n][<span class="hljs-number">2</span>]));<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>时间复杂度：O(n)</li>
<li>空间复杂度：O(1)</li>
</ul>
<h3 id="字符串翻转">字符串翻转</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minFlipsMonoIncr</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-comment">// dp0[i]：将前 i 个字符变成 全是 &#x27;0&#x27; 的最小翻转次数</span><br>        <span class="hljs-comment">// dp1[i]：将前 i 个字符变成 单调递增（最后以 &#x27;1&#x27; 结尾） 的最小翻转次数</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">dp0</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">dp1</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> s.charAt(i);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">newDp0</span> <span class="hljs-operator">=</span> dp0 + (c == <span class="hljs-string">&#x27;1&#x27;</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">newDp1</span> <span class="hljs-operator">=</span> Math.min(dp0, dp1) + (c == <span class="hljs-string">&#x27;0&#x27;</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br>            dp0 = newDp0;<br>            dp1 = newDp1;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> Math.min(dp0, dp1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="最长的斐波那契子序列的长度">最长的斐波那契子序列的长度</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LeetCode873</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lenLongestFibSubseq</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span>[][] dp)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;<br>        Map&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            map.put(arr[i], i);<br>            <span class="hljs-comment">// 数值 -&gt; 下标</span><br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxLen</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-comment">//        int[][] dp = new int[n][n];</span><br>        <span class="hljs-comment">// .....arr[k], arr[j], arr[i]</span><br>        <span class="hljs-comment">// 如果满足 arr[k] + arr[j] == arr[i]，那么 dp[j][i] = dp[k][j] + 1</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; i; j++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">k_value</span> <span class="hljs-operator">=</span> arr[i] - arr[j];<br>                <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> map.getOrDefault(k_value, -<span class="hljs-number">1</span>);<br><br>                <span class="hljs-keyword">if</span> (k != -<span class="hljs-number">1</span> &amp;&amp; arr[k] &lt; arr[j]) &#123;<br>                    <span class="hljs-comment">// 找到了符合条件的 k 并且满足递增</span><br>                    dp[j][i] = dp[k][j] + <span class="hljs-number">1</span>;<br>                    maxLen = Math.max(maxLen, dp[j][i] + <span class="hljs-number">2</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> maxLen;<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-type">int</span>[] arr = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;;<br>        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[arr.length][arr.length];<br>        System.out.println(lenLongestFibSubseq(arr, dp));<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span>[] a : dp) &#123;<br>            System.out.println(Arrays.toString(a));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="最长公共子序列">最长公共子序列</h3>
<p><strong>状态转移方程</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (text1.charAt(i - <span class="hljs-number">1</span>) == text2.charAt(j - <span class="hljs-number">1</span>)) &#123;<br>    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    dp[i][j] = Math.max(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>]);<br>&#125;<br></code></pre></td></tr></table></figure>
<p><strong>情况一</strong>：当前字符匹配</p>
<ul>
<li>把这两个字符加到它们前面部分<code>(i-1,j-1)</code>的最长子序列里</li>
</ul>
<p><strong>情况二</strong>：当前字符不匹配，两种选择：</p>
<ol type="1">
<li>忽略<code>text1</code>的当前字符，即只看<code>dp[i - 1][j]</code></li>
<li>忽略<code>text2</code>的当前字符，即只看<code>dp[i][j - 1]</code></li>
</ol>
<p>取这两个子问题中较长的那个作为<code>dp[i][j]</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">longestCommonSubsequence</span><span class="hljs-params">(String text1, String text2)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> text1.length(); <span class="hljs-comment">// 行数</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> text2.length(); <span class="hljs-comment">// 列数</span><br><br>        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[m + <span class="hljs-number">1</span>][n + <span class="hljs-number">1</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>                <span class="hljs-keyword">if</span> (text1.charAt(i - <span class="hljs-number">1</span>) == text2.charAt(j - <span class="hljs-number">1</span>)) &#123; <span class="hljs-comment">// 条件可以优化，先把text转化成char数组</span><br>                    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    dp[i][j] = Math.max(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>]);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[m][n];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>优化后的 LeetCode583</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">minDistance</span><span class="hljs-params">(String word1, String word2)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> word1.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> word2.length();<br><br>        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[m + <span class="hljs-number">1</span>][n + <span class="hljs-number">1</span>];<br><br>        <span class="hljs-type">char</span>[] w1 = word1.toCharArray();<br>        <span class="hljs-type">char</span>[] w2 = word2.toCharArray();<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br><br>            <span class="hljs-type">char</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> w1[i-<span class="hljs-number">1</span>];<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>                <span class="hljs-keyword">if</span> (x == w2[j - <span class="hljs-number">1</span>]) &#123;<br>                    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    dp[i][j] = Math.max(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>]);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> m + n - <span class="hljs-number">2</span> * dp[m][n];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="最长递增子序列">最长递增子序列</h3>
<p>这里涉及到求一个有序数组中大于等于某个数的最小值的下标：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lowerBound</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> nums.length; <span class="hljs-comment">// 注意这里是 nums.length 而不是 nums.length - 1</span><br><br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123; <span class="hljs-comment">// 当 left == right 的时候，退出循环</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + (right - left) / <span class="hljs-number">2</span>; <span class="hljs-comment">// 防止溢出</span><br>        <span class="hljs-keyword">if</span> (nums[mid] &lt; target) &#123;<br>            left = mid + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            right = mid; <span class="hljs-comment">// nums[mid] &gt;= target，mid 有可能是答案</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> left;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>完全解答：</p>
<p>我们维护一个数组<code>tails[]</code>：</p>
<ul>
<li><code>tails[i]</code>表示长度为<code>i+1</code>的递增子序列中，结尾最小的那个数。</li>
<li>为什么维护“最小的结尾”？因为结尾越小，后面越容易接上更大的数，从而组成更长的递增序列。</li>
</ul>
<p>时间复杂度：O(n log n)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">lengthOfLIS</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> &#123;<br><br>        <span class="hljs-comment">// 贪心 + 二分解法</span><br>        <span class="hljs-comment">// 维护一个数组tail[]</span><br>        <span class="hljs-type">int</span>[] tails = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[nums.length];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> num : nums) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> size;<br><br>            <span class="hljs-keyword">while</span>(left &lt; right) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (left + right) / <span class="hljs-number">2</span>;<br>                <span class="hljs-keyword">if</span>(tails[mid] &lt; num) &#123;<br>                    left = mid + <span class="hljs-number">1</span>;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    right = mid;<br>                &#125;<br>            &#125;<br>            tails[left] = num;<br>            <span class="hljs-keyword">if</span>(left == size) size++; <span class="hljs-comment">// num比所有的数都大，增加序列的长度</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> size;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="交错字符串">*交错字符串</h3>
<p>给定三个字符串 <code>s1</code>、<code>s2</code> 和
<code>s3</code>，判断 <code>s3</code> 是否由 <code>s1</code> 和
<code>s2</code> 交错组成。交错：保持原有字符顺序，但可以交替取字符。</p>
<hr />
<p>设 <code>dp[i][j]</code> 表示 <code>s1</code> 的前 <code>i</code>
个字符和 <code>s2</code> 的前 <code>j</code> 个字符，能否组成
<code>s3</code> 的前 <code>i+j</code> 个字符。</p>
<p><strong>状态转移方程：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">dp[i][j] = <span class="hljs-literal">true</span>，如果满足：<br>    （<span class="hljs-number">1</span>）dp[i-<span class="hljs-number">1</span>][j] == <span class="hljs-literal">true</span> 且 s1.charAt(i-<span class="hljs-number">1</span>) == s3.charAt(i+j-<span class="hljs-number">1</span>)<br> 或 （<span class="hljs-number">2</span>）dp[i][j-<span class="hljs-number">1</span>] == <span class="hljs-literal">true</span> 且 s2.charAt(j-<span class="hljs-number">1</span>) == s3.charAt(i+j-<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>
<ul>
<li><code>dp[0][0] = true</code>：空串可以构成空串</li>
<li>首行：只取 <code>s2</code> 来组成 <code>s3</code> 前 j 个字符</li>
<li>首列：只取 <code>s1</code> 来组成 <code>s3</code> 前 i 个字符</li>
</ul>
<hr />
<ul>
<li>时间复杂度：O(m × n)</li>
<li>空间复杂度：O(m × n)，可以优化为一维数组（滚动数组）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInterleave</span><span class="hljs-params">(String s1, String s2, String s3)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> s1.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s2.length();<br>        <span class="hljs-keyword">if</span> (s3.length() != m + n)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-comment">// 设 dp[i][j] 表示 s1 的前 i 个字符和 s2 的前 j 个字符，能否组成 s3 的前 i+j 个字符。</span><br>        <span class="hljs-type">boolean</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[m + <span class="hljs-number">1</span>][n + <span class="hljs-number">1</span>];<br>        <span class="hljs-type">char</span>[] s1_char = s1.toCharArray();<br>        <span class="hljs-type">char</span>[] s2_char = s2.toCharArray();<br>        <span class="hljs-type">char</span>[] s3_char = s3.toCharArray();<br><br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;<br><br>        <span class="hljs-comment">// 第一行：仅 s2 用于组合</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>            dp[<span class="hljs-number">0</span>][j] = dp[<span class="hljs-number">0</span>][j - <span class="hljs-number">1</span>] &amp;&amp; s2_char[j - <span class="hljs-number">1</span>] == s3_char[j - <span class="hljs-number">1</span>];<br>        &#125;<br><br>        <span class="hljs-comment">// 第一列：仅 s1 用于组合</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            dp[i][<span class="hljs-number">0</span>] = dp[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] &amp;&amp; s1_char[i - <span class="hljs-number">1</span>] == s3_char[i - <span class="hljs-number">1</span>];<br>        &#125;<br><br>        <span class="hljs-comment">// 遍历</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> s3_char[i + j - <span class="hljs-number">1</span>];<br>                dp[i][j] = (dp[i - <span class="hljs-number">1</span>][j] &amp;&amp; s1_char[i - <span class="hljs-number">1</span>] == c) || (dp[i][j - <span class="hljs-number">1</span>] &amp;&amp; s2_char[j - <span class="hljs-number">1</span>] == c);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[m][n];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="不同的子序列">*不同的子序列</h3>
<p>状态转移方程：</p>
<p>如果<code>s[i - 1] == t[j - 1]</code>，那么：</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span> = dp<span class="hljs-comment">[i - 1]</span><span class="hljs-comment">[j - 1]</span> + dp<span class="hljs-comment">[i - 1]</span><span class="hljs-comment">[j]</span><br></code></pre></td></tr></table></figure>
<p>第一项：用当前这个字符来匹配；第二项：忽略这个字符。</p>
<p>否则：</p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">dp<span class="hljs-comment">[i]</span><span class="hljs-comment">[j]</span> = dp<span class="hljs-comment">[i - 1]</span><span class="hljs-comment">[j]</span><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">numDistinct</span><span class="hljs-params">(String s, String t)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> t.length();<br>        <span class="hljs-keyword">if</span>(m &lt; n) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>        <span class="hljs-type">char</span>[] s_char = s.toCharArray();<br>        <span class="hljs-type">char</span>[] t_char = t.toCharArray();<br><br>        <span class="hljs-comment">//dp[i][j] 表示：s 的前 i 个字符中有多少个子序列等于 t 的前 j 个字符。</span><br>        <span class="hljs-comment">// dp[0][0] = 1：空串匹配空串</span><br>        <span class="hljs-comment">// dp[i][0] = 1：任意字符串 s 的前 i 个字符匹配空字符串 t 的唯一方式是全都删掉</span><br>        <span class="hljs-comment">// dp[0][j &gt; 0] = 0：空字符串 s 无法匹配非空字符串 t</span><br><br>        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[m + <span class="hljs-number">1</span>][n + <span class="hljs-number">1</span>];<br><br>        <span class="hljs-comment">// 初始化第一列 dp[i][0]</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= m; i++) &#123;<br>            dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-comment">// 状态转移</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= m; i++) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; j &lt;= n; j++) &#123;<br>                <span class="hljs-keyword">if</span>(s_char[i - <span class="hljs-number">1</span>] == t_char[j - <span class="hljs-number">1</span>]) &#123;<br>                    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + dp[i - <span class="hljs-number">1</span>][j];<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[m][n];<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="目标和">目标和</h3>
<p>把数组分成两个子集 P 和 N，其中 P 是加号部分，N 是减号部分。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fortran"><span class="hljs-built_in">sum</span>(P) + <span class="hljs-built_in">sum</span>(N) + <span class="hljs-built_in">sum</span>(P) - <span class="hljs-built_in">sum</span>(N) = <span class="hljs-keyword">target</span> + <span class="hljs-built_in">sum</span><br>==&gt; <span class="hljs-number">2</span> * <span class="hljs-built_in">sum</span>(P) = <span class="hljs-keyword">target</span> + <span class="hljs-built_in">sum</span><br>==&gt; <span class="hljs-built_in">sum</span>(P) = (<span class="hljs-keyword">target</span> + <span class="hljs-built_in">sum</span>) / <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>
<p>于是问题转化为：从数组中选出一些元素，使它们的和等于<code>(target + sum) / 2</code>，问有多少种选法。</p>
<p>0/1
背包问题（每个数只能用一次），所以要<strong>倒序遍历</strong>。否则会让同一个数被重复使用，变成完全背包。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">findTargetSumWays</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>        <span class="hljs-comment">// 记所有+的数字之和为p，所有-的数字之和为q</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) &#123;<br>            sum += num;<br>        &#125;<br>        <span class="hljs-keyword">if</span> ((sum + target) % <span class="hljs-number">2</span> != <span class="hljs-number">0</span> || Math.abs(target) &gt; sum)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> (sum + target) / <span class="hljs-number">2</span>;<br>        <span class="hljs-comment">// int q = (sum - target) / 2;</span><br>        <span class="hljs-comment">// 现在的目的是求子集和为p的子集</span><br><br>        <span class="hljs-type">int</span>[] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[p + <span class="hljs-number">1</span>];<br>        dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// 和为 0 的方法只有一种：什么都不选</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> num : nums) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> p; i &gt;= num; i--) &#123;<br>                dp[i] += dp[i - num];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> dp[p];<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>时间复杂度：O(n * target)</li>
<li>空间复杂度：O(target)</li>
</ul>
<h2 id="卡特兰数专题">卡特兰数专题</h2>
<p><strong>卡特兰数（Catalan Number）</strong>
相关的题目通常涉及一些特定的结构性计数问题，比如：</p>
<ul>
<li>有效括号生成</li>
<li>不同的二叉搜索树</li>
<li>有效的出栈序列</li>
<li>组合数学中的递归计数问题</li>
</ul>
<hr />
<table>

<thead>
<tr>
<th>题号</th>
<th>标题</th>
<th>对应卡特兰结构</th>
<th>难度</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/generate-parentheses/">22</a></td>
<td><strong>Generate Parentheses</strong>（括号生成）</td>
<td>有效括号组合数</td>
<td>中等</td>
</tr>
<tr>
<td><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/unique-binary-search-trees/">96</a></td>
<td><strong>Unique Binary Search Trees</strong></td>
<td>不同 BST 数目</td>
<td>中等</td>
</tr>
<tr>
<td><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/unique-binary-search-trees-ii/">95</a></td>
<td><strong>Unique Binary Search Trees II</strong></td>
<td>不同 BST 结构（生成）</td>
<td>中等</td>
</tr>
<tr>
<td><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/verify-preorder-serialization-of-a-binary-tree/">331</a></td>
<td><strong>Verify Preorder Serialization of a Binary Tree</strong></td>
<td>卡特兰式结构验证</td>
<td>中等</td>
</tr>
<tr>
<td><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/possible-bipartition/">886</a></td>
<td><strong>Possible Bipartition</strong></td>
<td>不直接是卡特兰，但和图分割计数有关</td>
<td>中等</td>
</tr>
<tr>
<td><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/k-concatenation-maximum-sum/">1191</a></td>
<td><strong>K-Concatenation Maximum Sum</strong></td>
<td>一些子问题涉及组合结构</td>
<td>中等</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>推荐刷题顺序</strong>：</p>
<ol type="1">
<li><strong><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/generate-parentheses/">22.
括号生成</a></strong>：递归回溯 + 卡特兰数结构</li>
<li><strong><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/unique-binary-search-trees/">96.
不同的二叉搜索树</a></strong>：DP + 卡特兰数（只算个数）</li>
<li><strong><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/unique-binary-search-trees-ii/">95.
不同的二叉搜索树 II</a></strong>：递归生成所有结构</li>
<li><strong><a
target="_blank" rel="noopener" href="https://leetcode.cn/problems/verify-preorder-serialization-of-a-binary-tree/">331.
验证二叉树的前序序列化</a></strong>：验证有效结构（考察卡特兰括号匹配思想）</li>
</ol>
<hr />
<h4 id="括号生成">括号生成</h4>
<p>数字<code>n</code>代表生成括号的对数，请你设计一个函数，用于能够生成所有可能的并且
有效的 括号组合。</p>
<p>思路：回溯</p>
<p>最后的结果中应当包含<code>n</code>个<code>(</code>和<code>n</code>个<code>)</code>，不妨用<code>left</code>和<code>right</code>来记录剩余需要的括号数量，每生成一个就减一。</p>
<p>对于<code>left</code>来说，只要剩余的还大于零，就尝试添加左括号；对于<code>right</code>，只要剩余的右括号比左括号多，就添加右括号。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">generateParenthesis</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>        List&lt;String&gt; res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        fn(n, n, <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(), res);<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fn</span><span class="hljs-params">(<span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right, StringBuilder path, List&lt;String&gt; res)</span> &#123;<br>        <span class="hljs-keyword">if</span>(left == <span class="hljs-number">0</span> &amp;&amp; right == <span class="hljs-number">0</span>) &#123;<br>            res.add(path.toString());<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(left &gt; <span class="hljs-number">0</span>) &#123;<br>            fn(left - <span class="hljs-number">1</span>, right, path.append(<span class="hljs-string">&quot;(&quot;</span>), res);<br>            path.deleteCharAt(path.length() - <span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span>(left &lt; right) &#123;<br>            fn(left, right - <span class="hljs-number">1</span>, path.append(<span class="hljs-string">&quot;)&quot;</span>), res);<br>            path.deleteCharAt(path.length() - <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>剑指offer-动态规划</div>
      <div>https://kznleaf.site/2025/07/14/剑指offer-动态规划/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>banyee</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年7月14日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/vvd_js/duration.js"></script> </div> 
    </div>
  
  
  
</div>
  </footer>

  <!-- Scripts -->
  

<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>




  
<script src="/js/custom.js"></script>
<script src="/js/sign.js"></script>
<script src="/js/backgroundize.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<!-- hexo injector body_end start --><script src="/js/backgroundize.js"></script><!-- hexo injector body_end end --></body>
</html>
